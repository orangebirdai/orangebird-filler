<script>
  document.getElementById("uploadForm").onsubmit = async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    let result = document.getElementById("result");
    result.innerHTML = "Working… (10–20 sec)";

    let res1 = await fetch("/complete", { method: "POST", body: formData });
    let data1 = await res1.json();

    let res2 = await fetch("/essay", { method: "POST", body: formData });
    let data2 = await res2.json();

    result.innerHTML = `
      <h3>Done!</h3>
      <p><a href="/download/${data1.file}" download>Download Completed Worksheet</a></p>
      <p><a href="/download/${data2.file}" download>Download Full Essay (1500 words)</a></p>
    `;
  }
</script>
